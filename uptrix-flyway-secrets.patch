*** Begin Patch
*** Update File: src/main/resources/application.properties
@@
-spring.datasource.url=jdbc:mysql://127.0.0.1:3306/uptrix?createDatabaseIfNotExist=true&useSSL=false&serverTimezone=UTC
-spring.datasource.username=root
-spring.datasource.password=naveen
-
-spring.jpa.hibernate.ddl-auto=update
-spring.jpa.show-sql=true
-spring.jpa.properties.hibernate.format_sql=true
-spring.jpa.open-in-view=true
-
-spring.application.name=uptrix-backend
-server.port=8080
-
-# JWT
-uptrix.jwt.secret=change_this_to_a_long_random_secret_key_1234567890
-uptrix.jwt.expiration-ms=86400000
-
-#OpenAi
-openai.api.key=sk-proj-XDEZT1H55-gmi37FpVDoYIjnKNxZGMo_dsErg2cWo...bVUBX8ubX5KJ899kScRQgXINEO_MAvfXlBatZBefrLM8a_lBeU01kJ0dNPfN2O8A
-openai.api.url=https://api.openai.com/v1/chat/completions
-openai.model=gpt-4.1-mini
-
-app.file.upload-dir= C:/Users/navee/Desktop/UpTrix/uploads
-# Allow up to 10 MB per file
-spring.servlet.multipart.max-file-size=10MB
-
-# Allow total request up to 25 MB (sum of all files + form fields)
-spring.servlet.multipart.max-reque
-st-size=25MB
+# Uptrix application properties
+# Sensitive values are read from environment variables. For local development you can copy
+# 'application-secrets.properties.example' to 'application-secrets.properties' (ignored by git)
+# or set the corresponding environment variables.
+spring.datasource.url=${DB_URL:jdbc:mysql://127.0.0.1:3306/uptrix?createDatabaseIfNotExist=true&useSSL=false&serverTimezone=UTC}
+spring.datasource.username=${DB_USER:root}
+spring.datasource.password=${DB_PASS:}
+
+# IMPORTANT: do NOT commit secrets. Use environment variables or a secret manager in production.
+spring.jpa.hibernate.ddl-auto=${JPA_DDL_AUTO:update}
+spring.jpa.show-sql=${JPA_SHOW_SQL:true}
+spring.jpa.properties.hibernate.format_sql=true
+spring.jpa.open-in-view=true
+
+spring.application.name=uptrix-backend
+server.port=${SERVER_PORT:8080}
+
+# JWT - use a long random secret or preferably an asymmetric keypair (RS256).
+uptrix.jwt.secret=${UPTRIX_JWT_SECRET:}
+uptrix.jwt.expiration-ms=${UPTRIX_JWT_EXP_MS:86400000}
+
+# OpenAI - move your real key into env var OPENAI_API_KEY
+openai.api.key=${OPENAI_API_KEY:}
+openai.api.url=${OPENAI_API_URL:https://api.openai.com/v1/chat/completions}
+openai.model=${OPENAI_MODEL:gpt-4.1-mini}
+
+# File uploads - keep this configurable and don't commit local absolute paths
+app.file.upload-dir=${APP_UPLOAD_DIR:./uploads}
+# Allow up to 10 MB per file
+spring.servlet.multipart.max-file-size=10MB
+
+# Allow total request up to 25 MB (sum of all files + form fields)
+spring.servlet.multipart.max-request-size=25MB
*** End Patch

*** Begin Patch
*** Update File: pom.xml
@@
         </dependency>
 
         <!-- OpenAPI / Swagger UI (use starter compatible with Spring Boot 4) -->
         <dependency>
             <groupId>org.springdoc</groupId>
             <artifactId>springdoc-openapi-starter-webmvc-ui</artifactId>
             <version>3.0.0</version> <!-- Use a compatible version, check Maven Central for latest -->
         </dependency>
 
+        <!-- Flyway DB migrations -->
+        <dependency>
+            <groupId>org.flywaydb</groupId>
+            <artifactId>flyway-core</artifactId>
+        </dependency>
+
         <!-- Tests -->
         <dependency>
             <groupId>org.springframework.boot</groupId>
             <artifactId>spring-boot-starter-test</artifactId>
             <scope>test</scope>
         </dependency>
*** End Patch

*** Begin Patch
*** Update File: .gitignore
@@
 HELP.md
 target/
 .mvn/wrapper/maven-wrapper.jar
 !**/src/main/**/target/
 !**/src/test/**/target/
 
 ### STS ###
 .apt_generated
 .classpath
 .factorypath
 .project
 .settings
 .springBeans
 .sts4-cache
@@
 ### VS Code ###
 .vscode/
+
+# Local secrets and generated files
+/src/main/resources/application-secrets.properties
+application-secrets.properties
+# Ignore uploads folder potentially created in development
+/src/main/resources/uploads/
+uploads/
+# Ignore RSA private keys if generated locally
+*.pem
*** End Patch

*** Begin Patch
*** Add File: src/main/resources/db/migration/V1__init.sql
+-- V1__init.sql
+-- Initial Flyway migration for Uptrix (minimal example).
+-- Customize this script to match your current JPA entities.
+CREATE TABLE IF NOT EXISTS roles (
+  id BIGINT AUTO_INCREMENT PRIMARY KEY,
+  name VARCHAR(100) NOT NULL UNIQUE
+);
+
+CREATE TABLE IF NOT EXISTS users (
+  id BIGINT AUTO_INCREMENT PRIMARY KEY,
+  username VARCHAR(150) NOT NULL UNIQUE,
+  password VARCHAR(200) NOT NULL,
+  email VARCHAR(255),
+  enabled BOOLEAN DEFAULT TRUE,
+  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
+);
+
+CREATE TABLE IF NOT EXISTS user_roles (
+  user_id BIGINT NOT NULL,
+  role_id BIGINT NOT NULL,
+  PRIMARY KEY (user_id, role_id),
+  CONSTRAINT fk_user FOREIGN KEY (user_id) REFERENCES users(id),
+  CONSTRAINT fk_role FOREIGN KEY (role_id) REFERENCES roles(id)
+);
*** End Patch

*** Begin Patch
*** Add File: src/main/resources/application-secrets.properties.example
+# application-secrets.properties.example
+# Copy this file to 'application-secrets.properties' for local dev (DO NOT commit the real file).
+# Example values (replace with real secrets or use env vars instead)
+DB_URL=jdbc:mysql://127.0.0.1:3306/uptrix?useSSL=false&serverTimezone=UTC
+DB_USER=root
+DB_PASS=your_local_db_password
+
+UPTRIX_JWT_SECRET=change_me_with_a_long_random_secret
+UPTRIX_JWT_EXP_MS=86400000
+
+OPENAI_API_KEY=sk-...
+OPENAI_API_URL=https://api.openai.com/v1/chat/completions
+OPENAI_MODEL=gpt-4.1-mini
+
+APP_UPLOAD_DIR=./uploads
*** End Patch
